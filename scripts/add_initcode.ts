// registerRating.js
const { ethers } = require("hardhat");

async function main() {
    // Get the signer to send the transactions
    const signer = (await ethers.getSigners())[0];

    // Get an instance of the deployed RatingUpdate contract
    const ratingRegister = await ethers.getContractAt("RatingRegister", "0x490DDb507C77e467F6C572C765CA0861bbDA0aA6", signer);

    console.log("Creating the rating contract...");
    const tx = await ratingRegister.registerLogic("Elorating", "0x6080604052738abf2979de2fea109fd20b359aa7a2582339d64e6000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555034801561006457600080fd5b50610797806100746000396000f3fe608060405234801561001057600080fd5b50600436106100365760003560e01c8063c640752d1461003b578063ec63218d14610057575b600080fd5b610055600480360381019061005091906103cd565b610088565b005b610071600480360381019061006c9190610443565b6100cf565b60405161007f929190610492565b60405180910390f35b600061009383610185565b905060006100a083610185565b90506000806100af84846100cf565b915091506100bd86836102d7565b6100c785826102d7565b505050505050565b600080600083856100e091906104f4565b905060006101906020836100f49190610537565b6100fe91906105de565b602061010a9190610648565b9050858187610119919061067c565b111561013257808661012b919061067c565b9550610156565b7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff95505b8085111561017157808561016a9190610648565b9450610176565b600094505b85859350935050509250929050565b60008060008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663488ede8b30856040518363ffffffff1660e01b81526004016101e39291906106bf565b602060405180830381865afa158015610200573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061022491906106fd565b03610233576105dc90506102d2565b60008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663488ede8b30846040518363ffffffff1660e01b815260040161028e9291906106bf565b602060405180830381865afa1580156102ab573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102cf91906106fd565b90505b919050565b60008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663f3806cc73084846040518463ffffffff1660e01b81526004016103349392919061072a565b600060405180830381600087803b15801561034e57600080fd5b505af1158015610362573d6000803e3d6000fd5b505050505050565b600080fd5b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b600061039a8261036f565b9050919050565b6103aa8161038f565b81146103b557600080fd5b50565b6000813590506103c7816103a1565b92915050565b600080604083850312156103e4576103e361036a565b5b60006103f2858286016103b8565b9250506020610403858286016103b8565b9150509250929050565b6000819050919050565b6104208161040d565b811461042b57600080fd5b50565b60008135905061043d81610417565b92915050565b6000806040838503121561045a5761045961036a565b5b60006104688582860161042e565b92505060206104798582860161042e565b9150509250929050565b61048c8161040d565b82525050565b60006040820190506104a76000830185610483565b6104b46020830184610483565b9392505050565b6000819050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b60006104ff826104bb565b915061050a836104bb565b9250828203905081811260008412168282136000851215161715610531576105306104c5565b5b92915050565b6000610542826104bb565b915061054d836104bb565b925082820261055b816104bb565b91507f80000000000000000000000000000000000000000000000000000000000000008414600084121615610593576105926104c5565b5b82820584148315176105a8576105a76104c5565b5b5092915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601260045260246000fd5b60006105e9826104bb565b91506105f4836104bb565b925082610604576106036105af565b5b600160000383147f80000000000000000000000000000000000000000000000000000000000000008314161561063d5761063c6104c5565b5b828205905092915050565b60006106538261040d565b915061065e8361040d565b9250828203905081811115610676576106756104c5565b5b92915050565b60006106878261040d565b91506106928361040d565b92508282019050808211156106aa576106a96104c5565b5b92915050565b6106b98161038f565b82525050565b60006040820190506106d460008301856106b0565b6106e160208301846106b0565b9392505050565b6000815190506106f781610417565b92915050565b6000602082840312156107135761071261036a565b5b6000610721848285016106e8565b91505092915050565b600060608201905061073f60008301866106b0565b61074c60208301856106b0565b6107596040830184610483565b94935050505056fea2646970667358221220274013aedd31ddd37dd0d333671382a3daf83119d67ec0867ee1f85f522f8dfb64736f6c63430008120033")
    await tx.wait(); // Wait for the transaction to be mined

    console.log("Rating contract registered successfully.");
}

main()
    .then(() => process.exit(0))
    .catch((error) => {
        console.error(error);
        process.exit(1);
    });
